{"openapi":"3.0.0","paths":{"/api":{"get":{"operationId":"AppController_getHello","parameters":[],"responses":{"200":{"description":"成功获取欢迎信息"}},"summary":"获取系统欢迎信息","tags":["系统信息"]}},"/api/health":{"get":{"operationId":"AppController_getHealth","parameters":[],"responses":{"200":{"description":"系统健康状态正常","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"timestamp":{"type":"string","example":"2024-01-01T00:00:00.000Z"},"uptime":{"type":"number","example":3600},"environment":{"type":"string","example":"development"}}}}}}},"summary":"系统健康检查","tags":["系统信息"]}},"/api/auth/register":{"post":{"operationId":"AuthController_register","parameters":[],"requestBody":{"required":true,"description":"用户注册信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterDto"}}}},"responses":{"201":{"description":"注册成功"},"400":{"description":"请求参数错误"},"409":{"description":"用户名、邮箱或手机号已存在"}},"summary":"用户注册","tags":["认证管理"]}},"/api/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"requestBody":{"required":true,"description":"用户登录凭证","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"200":{"description":"登录成功"},"400":{"description":"请求参数错误"},"401":{"description":"登录凭证或密码错误"}},"summary":"用户登录","tags":["认证管理"]}},"/api/auth/profile":{"get":{"operationId":"AuthController_getProfile","parameters":[],"responses":{"200":{"description":"获取成功"},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"获取当前用户信息","tags":["认证管理"]}},"/api/auth/logout":{"post":{"operationId":"AuthController_logout","parameters":[],"responses":{"200":{"description":"登出成功"},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"用户登出","tags":["认证管理"]}},"/api/auth/admin/users":{"get":{"operationId":"AuthController_findAllUsers","parameters":[{"name":"page","required":false,"in":"query","description":"页码","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"size","required":false,"in":"query","description":"每页数量，最大不超过100条","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"搜索关键词（用户名、邮箱）","schema":{"example":"admin","type":"string"}},{"name":"role","required":false,"in":"query","description":"角色筛选","schema":{"enum":["admin","user"],"type":"string"}},{"name":"limit","required":false,"in":"query","description":"每页数量","schema":{"example":10}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"number","example":200},"message":{"type":"string","example":"获取成功"},"data":{"type":"array","items":{"$ref":"#/components/schemas/UserResponseDto"},"description":"用户列表"},"pagination":{"type":"object","properties":{"total":{"type":"number","description":"总记录数"},"page":{"type":"number","description":"当前页码"},"limit":{"type":"number","description":"每页数量"},"totalPages":{"type":"number","description":"总页数"}}}}}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"分页获取所有用户列表（管理员专用）","tags":["认证管理"]}},"/api/accounts":{"post":{"operationId":"AccountsController_create","parameters":[],"requestBody":{"required":true,"description":"账号创建信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAccountDto"}}}},"responses":{"201":{"description":"账号创建成功"},"400":{"description":"请求参数错误"},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"创建新账号","tags":["账号管理"]},"get":{"operationId":"AccountsController_findAll","parameters":[{"name":"page","required":false,"in":"query","description":"页码，默认为1","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"size","required":false,"in":"query","description":"每页数量，最大不超过100条","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"搜索关键词（账号名称）","schema":{"example":"admin","type":"string"}},{"name":"isActive","required":false,"in":"query","description":"是否激活","schema":{"example":true,"type":"boolean"}},{"name":"limit","required":false,"in":"query","description":"每页数量，默认为10","schema":{"example":10,"type":"number"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"number","example":200},"message":{"type":"string","example":"获取成功"},"data":{"type":"array","items":{"$ref":"#/components/schemas/AccountWithUserDto"},"description":"账号列表"},"pagination":{"type":"object","properties":{"total":{"type":"number","description":"总记录数"},"page":{"type":"number","description":"当前页码"},"limit":{"type":"number","description":"每页数量"},"totalPages":{"type":"number","description":"总页数"}}}}}}}},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"分页获取当前用户的账号列表（包含用户信息）","tags":["账号管理"]}},"/api/accounts/admin/all":{"get":{"operationId":"AccountsController_findAllForAdmin","parameters":[{"name":"page","required":false,"in":"query","description":"页码，默认为1","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"size","required":false,"in":"query","description":"每页数量，最大不超过100条","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"搜索关键词（账号名、用户名、邮箱）","schema":{"example":"admin","type":"string"}},{"name":"isActive","required":false,"in":"query","description":"是否激活","schema":{"example":true,"type":"boolean"}},{"name":"limit","required":false,"in":"query","description":"每页数量，默认为10","schema":{"example":10,"type":"number"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"number","example":200},"message":{"type":"string","example":"获取成功"},"data":{"type":"array","items":{"$ref":"#/components/schemas/AccountWithUserDto"},"description":"账号列表"},"pagination":{"type":"object","properties":{"total":{"type":"number","description":"总记录数"},"page":{"type":"number","description":"当前页码"},"limit":{"type":"number","description":"每页数量"},"totalPages":{"type":"number","description":"总页数"}}}}}}}},"401":{"description":"未授权"},"403":{"description":"权限不足"}},"security":[{"bearer":[]}],"summary":"分页获取所有账号列表（管理员专用）","tags":["账号管理"]}},"/api/accounts/stats":{"get":{"operationId":"AccountsController_getStats","parameters":[],"responses":{"200":{"description":"获取成功"},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"获取账号统计信息","tags":["账号管理"]}},"/api/accounts/{id}":{"get":{"operationId":"AccountsController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"账号ID","schema":{"type":"string"}}],"responses":{"200":{"description":"获取成功"},"401":{"description":"未授权"},"403":{"description":"无权访问"},"404":{"description":"账号不存在"}},"security":[{"bearer":[]}],"summary":"获取指定账号详情","tags":["账号管理"]},"patch":{"operationId":"AccountsController_update","parameters":[{"name":"id","required":true,"in":"path","description":"账号ID","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"账号更新信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAccountDto"}}}},"responses":{"200":{"description":"更新成功"},"401":{"description":"未授权"},"403":{"description":"无权访问"},"404":{"description":"账号不存在"}},"security":[{"bearer":[]}],"summary":"更新账号信息","tags":["账号管理"]},"delete":{"operationId":"AccountsController_remove","parameters":[{"name":"id","required":true,"in":"path","description":"账号ID","schema":{"type":"string"}}],"responses":{"200":{"description":"删除成功"},"401":{"description":"未授权"},"403":{"description":"无权访问"},"404":{"description":"账号不存在"}},"security":[{"bearer":[]}],"summary":"删除账号","tags":["账号管理"]}},"/api/accounts/{id}/toggle-active":{"patch":{"operationId":"AccountsController_toggleActive","parameters":[{"name":"id","required":true,"in":"path","description":"账号ID","schema":{"type":"string"}}],"responses":{"200":{"description":"状态切换成功"},"401":{"description":"未授权"},"403":{"description":"无权访问"},"404":{"description":"账号不存在"}},"security":[{"bearer":[]}],"summary":"切换账号激活状态","tags":["账号管理"]}},"/api/accounts/batch-update-status":{"post":{"operationId":"AccountsController_batchUpdateStatus","parameters":[],"responses":{"200":{"description":"批量更新成功"},"401":{"description":"未授权"},"404":{"description":"部分账号不存在"}},"security":[{"bearer":[]}],"summary":"批量更新账号状态","tags":["账号管理"]}},"/api/templates/dungeons":{"post":{"operationId":"TemplatesController_createDungeonTemplate","parameters":[],"requestBody":{"required":true,"description":"副本模板创建信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDungeonTemplateDto"}}}},"responses":{"201":{"description":"副本模板创建成功"},"400":{"description":"请求参数错误"},"401":{"description":"未授权"},"403":{"description":"需要管理员权限"}},"security":[{"bearer":[]}],"summary":"创建副本模板（仅管理员）","tags":["模板管理"]},"get":{"operationId":"TemplatesController_findAllDungeonTemplates","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从1开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"size","required":false,"in":"query","description":"每页数量，最大100","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"搜索副本名称","schema":{"example":"团队副本","type":"string"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"number","example":200},"message":{"type":"string","example":"获取成功"},"data":{"type":"object","properties":{"total":{"type":"number","description":"总记录数"},"items":{"type":"array","items":{"$ref":"#/components/schemas/DungeonTemplate"},"description":"当前页数据列表"},"page":{"type":"number","description":"当前页码"},"size":{"type":"number","description":"每页数量"},"totalPages":{"type":"number","description":"总页数"}}}}}}}},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"获取所有副本模板（支持分页）","tags":["模板管理"]}},"/api/templates/dungeons/{id}":{"get":{"operationId":"TemplatesController_findDungeonTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"副本模板ID","schema":{"type":"string"}}],"responses":{"200":{"description":"获取成功"},"401":{"description":"未授权"},"404":{"description":"副本模板不存在"}},"security":[{"bearer":[]}],"summary":"获取指定副本模板详情","tags":["模板管理"]},"patch":{"operationId":"TemplatesController_updateDungeonTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"副本模板ID","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"副本模板更新信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateDungeonTemplateDto"}}}},"responses":{"200":{"description":"更新成功"},"401":{"description":"未授权"},"403":{"description":"需要管理员权限"},"404":{"description":"副本模板不存在"}},"security":[{"bearer":[]}],"summary":"更新副本模板（仅管理员）","tags":["模板管理"]},"delete":{"operationId":"TemplatesController_removeDungeonTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"副本模板ID","schema":{"type":"string"}}],"responses":{"200":{"description":"删除成功"},"401":{"description":"未授权"},"403":{"description":"需要管理员权限"},"404":{"description":"副本模板不存在"}},"security":[{"bearer":[]}],"summary":"删除副本模板（仅管理员）","tags":["模板管理"]}},"/api/templates/weekly-tasks":{"post":{"operationId":"TemplatesController_createWeeklyTaskTemplate","parameters":[],"requestBody":{"required":true,"description":"周常任务模板创建信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateWeeklyTaskTemplateDto"}}}},"responses":{"201":{"description":"周常任务模板创建成功"},"400":{"description":"请求参数错误"},"401":{"description":"未授权"},"403":{"description":"需要管理员权限"}},"security":[{"bearer":[]}],"summary":"创建周常任务模板（仅管理员）","tags":["模板管理"]},"get":{"operationId":"TemplatesController_findAllWeeklyTaskTemplates","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从1开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"size","required":false,"in":"query","description":"每页数量，最大100","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"搜索任务名称","schema":{"example":"日常任务","type":"string"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"number","example":200},"message":{"type":"string","example":"获取成功"},"data":{"type":"object","properties":{"total":{"type":"number","description":"总记录数"},"items":{"type":"array","items":{"$ref":"#/components/schemas/WeeklyTaskTemplate"},"description":"当前页数据列表"},"page":{"type":"number","description":"当前页码"},"size":{"type":"number","description":"每页数量"},"totalPages":{"type":"number","description":"总页数"}}}}}}}},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"获取所有周常任务模板（支持分页）","tags":["模板管理"]}},"/api/templates/weekly-tasks/{id}":{"get":{"operationId":"TemplatesController_findWeeklyTaskTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"周常任务模板ID","schema":{"type":"string"}}],"responses":{"200":{"description":"获取成功"},"401":{"description":"未授权"},"404":{"description":"周常任务模板不存在"}},"security":[{"bearer":[]}],"summary":"获取指定周常任务模板详情","tags":["模板管理"]},"patch":{"operationId":"TemplatesController_updateWeeklyTaskTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"周常任务模板ID","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"周常任务模板更新信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateWeeklyTaskTemplateDto"}}}},"responses":{"200":{"description":"更新成功"},"401":{"description":"未授权"},"403":{"description":"需要管理员权限"},"404":{"description":"周常任务模板不存在"}},"security":[{"bearer":[]}],"summary":"更新周常任务模板（仅管理员）","tags":["模板管理"]},"delete":{"operationId":"TemplatesController_removeWeeklyTaskTemplate","parameters":[{"name":"id","required":true,"in":"path","description":"周常任务模板ID","schema":{"type":"string"}}],"responses":{"200":{"description":"删除成功"},"401":{"description":"未授权"},"403":{"description":"需要管理员权限"},"404":{"description":"周常任务模板不存在"}},"security":[{"bearer":[]}],"summary":"删除周常任务模板（仅管理员）","tags":["模板管理"]}},"/api/templates/stats":{"get":{"operationId":"TemplatesController_getTemplateStats","parameters":[],"responses":{"200":{"description":"获取成功"},"401":{"description":"未授权"}},"security":[{"bearer":[]}],"summary":"获取模板统计信息","tags":["模板管理"]}},"/api/progress/current-week":{"get":{"operationId":"ProgressController_getCurrentWeekProgress","parameters":[{"name":"page","required":false,"in":"query","description":"页码，默认为1","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"size","required":false,"in":"query","description":"每页数量，默认为10","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"搜索关键词（账号名称）","schema":{"example":"admin","type":"string"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"type":"object","properties":{"total":{"type":"number","description":"总记录数"},"items":{"type":"array","items":{"$ref":"#/components/schemas/WeeklyProgress"},"description":"当前周进度列表"},"page":{"type":"number","description":"当前页码"},"size":{"type":"number","description":"每页数量"},"totalPages":{"type":"number","description":"总页数"}}}}}}},"security":[{"bearer":[]}],"summary":"获取当前周进度（支持分页）","tags":["进度跟踪"]}},"/api/progress/account/{accountId}":{"get":{"operationId":"ProgressController_getAccountProgress","parameters":[{"name":"accountId","required":true,"in":"path","description":"账号ID","schema":{"type":"string"}}],"responses":{"200":{"description":"成功获取账号进度"},"403":{"description":"无权访问此账号"},"404":{"description":"账号不存在"}},"security":[{"bearer":[]}],"summary":"获取指定账号的当前周进度","tags":["进度跟踪"]}},"/api/progress/dungeon":{"post":{"operationId":"ProgressController_updateDungeonProgress","parameters":[],"requestBody":{"required":true,"description":"副本进度更新信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateDungeonProgressDto"}}}},"responses":{"200":{"description":"成功更新副本进度"},"403":{"description":"无权访问此账号"},"404":{"description":"账号不存在"}},"security":[{"bearer":[]}],"summary":"更新副本进度","tags":["进度跟踪"]}},"/api/progress/weekly-task":{"post":{"operationId":"ProgressController_updateWeeklyTaskProgress","parameters":[],"requestBody":{"required":true,"description":"周常任务进度更新信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateWeeklyTaskProgressDto"}}}},"responses":{"200":{"description":"成功更新周常任务进度"},"403":{"description":"无权访问此账号"},"404":{"description":"账号不存在"}},"security":[{"bearer":[]}],"summary":"更新周常任务进度","tags":["进度跟踪"]}},"/api/progress/stats":{"get":{"operationId":"ProgressController_getProgressStats","parameters":[],"responses":{"200":{"description":"成功获取统计信息"}},"security":[{"bearer":[]}],"summary":"获取进度统计信息","tags":["进度跟踪"]}},"/api/progress/historical":{"get":{"operationId":"ProgressController_getHistoricalProgress","parameters":[{"name":"page","required":false,"in":"query","description":"页码，默认为1","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"size","required":false,"in":"query","description":"每页数量，默认为10","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"搜索关键词（账号名称）","schema":{"example":"admin","type":"string"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"type":"object","properties":{"total":{"type":"number","description":"总记录数"},"items":{"type":"array","items":{"$ref":"#/components/schemas/WeeklyProgress"},"description":"历史进度列表"},"page":{"type":"number","description":"当前页码"},"size":{"type":"number","description":"每页数量"},"totalPages":{"type":"number","description":"总页数"}}}}}}},"security":[{"bearer":[]}],"summary":"获取历史进度（支持分页）","tags":["进度跟踪"]}},"/api/progress/shared-account/{accountName}":{"get":{"operationId":"ProgressController_getSharedAccountProgress","parameters":[{"name":"accountName","required":true,"in":"path","description":"共享账号名称","schema":{"type":"string"}}],"responses":{"200":{"description":"成功获取共享账号进度"},"403":{"description":"无权访问此共享账号"},"404":{"description":"共享账号不存在"}},"security":[{"bearer":[]}],"summary":"获取指定共享账号的当前周进度","tags":["进度跟踪"]}},"/api/progress/shared-account/dungeon":{"post":{"operationId":"ProgressController_updateSharedDungeonProgress","parameters":[],"requestBody":{"required":true,"description":"共享账号副本进度更新信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSharedDungeonProgressDto"}}}},"responses":{"200":{"description":"成功更新共享账号副本进度"},"403":{"description":"无权访问此共享账号"},"404":{"description":"共享账号不存在"}},"security":[{"bearer":[]}],"summary":"更新共享账号副本进度","tags":["进度跟踪"]}},"/api/progress/shared-account/weekly-task":{"post":{"operationId":"ProgressController_updateSharedWeeklyTaskProgress","parameters":[],"requestBody":{"required":true,"description":"共享账号周常任务进度更新信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSharedWeeklyTaskProgressDto"}}}},"responses":{"200":{"description":"成功更新共享账号周常任务进度"},"403":{"description":"无权访问此共享账号"},"404":{"description":"共享账号不存在"}},"security":[{"bearer":[]}],"summary":"更新共享账号周常任务进度","tags":["进度跟踪"]}},"/api/progress/reset-weekly":{"post":{"description":"此接口主要用于定时任务，手动调用需要管理员权限","operationId":"ProgressController_resetWeeklyProgress","parameters":[],"responses":{"200":{"description":"成功重置周进度"}},"security":[{"bearer":[]}],"summary":"重置周进度（管理员功能）","tags":["进度跟踪"]}},"/api/scheduler/info":{"get":{"operationId":"SchedulerController_getSchedulerInfo","parameters":[],"responses":{"200":{"description":"成功获取定时任务信息"}},"security":[{"bearer":[]}],"summary":"获取定时任务信息","tags":["定时任务管理"]}},"/api/scheduler/manual-reset":{"post":{"description":"手动执行周进度重置任务，通常用于测试或紧急情况","operationId":"SchedulerController_manualResetWeeklyProgress","parameters":[],"responses":{"200":{"description":"成功执行手动重置"},"500":{"description":"重置失败"}},"security":[{"bearer":[]}],"summary":"手动触发周进度重置","tags":["定时任务管理"]}},"/api/shared-accounts":{"post":{"operationId":"SharedAccountsController_createSharedAccount","parameters":[],"requestBody":{"required":true,"description":"共享账号创建信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSharedAccountDto"}}}},"responses":{"201":{"description":"共享账号创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SharedAccountResponseDto"}}}},"409":{"description":"账号名已存在"}},"security":[{"bearer":[]}],"summary":"创建共享账号","tags":["共享账号管理"]},"get":{"operationId":"SharedAccountsController_getUserAccessibleAccounts","parameters":[{"name":"page","required":false,"in":"query","description":"页码，从1开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"size","required":false,"in":"query","description":"每页数量，最大100","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"搜索关键词（账号名、显示名、服务器名）","schema":{"example":"team","type":"string"}},{"name":"includeInactive","required":false,"in":"query","description":"是否包含非活跃账号","schema":{"type":"boolean"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"type":"object","properties":{"total":{"type":"number","description":"总记录数"},"items":{"type":"array","items":{"$ref":"#/components/schemas/SharedAccountResponseDto"},"description":"当前页数据列表"},"page":{"type":"number","description":"当前页码"},"size":{"type":"number","description":"每页数量"},"totalPages":{"type":"number","description":"总页数"}}}}}}},"security":[{"bearer":[]}],"summary":"获取用户可访问的共享账号列表（支持分页）","tags":["共享账号管理"]}},"/api/shared-accounts/{accountName}":{"get":{"operationId":"SharedAccountsController_getSharedAccountDetail","parameters":[{"name":"accountName","required":true,"in":"path","description":"共享账号名称","schema":{"example":"team_account_001","type":"string"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SharedAccountDetailResponseDto"}}}},"403":{"description":"没有权限访问此共享账号"},"404":{"description":"共享账号不存在"}},"security":[{"bearer":[]}],"summary":"获取共享账号详情","tags":["共享账号管理"]},"put":{"operationId":"SharedAccountsController_updateSharedAccount","parameters":[{"name":"accountName","required":true,"in":"path","description":"共享账号名称","schema":{"example":"team_account_001","type":"string"}}],"requestBody":{"required":true,"description":"共享账号更新信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSharedAccountDto"}}}},"responses":{"200":{"description":"更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SharedAccountResponseDto"}}}},"403":{"description":"没有权限修改此共享账号"},"404":{"description":"共享账号不存在"}},"security":[{"bearer":[]}],"summary":"更新共享账号信息","tags":["共享账号管理"]},"delete":{"operationId":"SharedAccountsController_deleteSharedAccount","parameters":[{"name":"accountName","required":true,"in":"path","description":"共享账号名称","schema":{"example":"team_account_001","type":"string"}}],"responses":{"204":{"description":"删除成功"},"403":{"description":"没有权限删除此共享账号"},"404":{"description":"共享账号不存在"}},"security":[{"bearer":[]}],"summary":"删除共享账号","tags":["共享账号管理"]}},"/api/shared-accounts/{accountName}/users":{"post":{"operationId":"SharedAccountsController_addUserToAccount","parameters":[{"name":"accountName","required":true,"in":"path","description":"共享账号名称","schema":{"example":"team_account_001","type":"string"}}],"requestBody":{"required":true,"description":"添加用户信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddUserToAccountDto"}}}},"responses":{"201":{"description":"用户添加成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRelationResponseDto"}}}},"403":{"description":"只有所有者可以添加用户"},"404":{"description":"共享账号不存在"},"409":{"description":"用户已经关联到此共享账号"}},"security":[{"bearer":[]}],"summary":"添加用户到共享账号","tags":["共享账号管理"]},"get":{"operationId":"SharedAccountsController_getAccountUsers","parameters":[{"name":"accountName","required":true,"in":"path","description":"共享账号名称","schema":{"example":"team_account_001","type":"string"}},{"name":"page","required":false,"in":"query","description":"页码，从1开始","schema":{"minimum":1,"default":1,"example":1,"type":"number"}},{"name":"size","required":false,"in":"query","description":"每页数量，最大100","schema":{"minimum":1,"maximum":100,"default":20,"example":20,"type":"number"}},{"name":"search","required":false,"in":"query","description":"搜索关键词（用户ID或用户名）","schema":{"example":"admin","type":"string"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"type":"object","properties":{"total":{"type":"number","description":"总记录数"},"items":{"type":"array","items":{"$ref":"#/components/schemas/UserRelationResponseDto"},"description":"当前页数据列表"},"page":{"type":"number","description":"当前页码"},"size":{"type":"number","description":"每页数量"},"totalPages":{"type":"number","description":"总页数"}}}}}},"403":{"description":"没有权限查看用户列表"}},"security":[{"bearer":[]}],"summary":"获取共享账号的用户列表（支持分页）","tags":["共享账号管理"]}},"/api/shared-accounts/{accountName}/users/{userId}":{"delete":{"operationId":"SharedAccountsController_removeUserFromAccount","parameters":[{"name":"accountName","required":true,"in":"path","description":"共享账号名称","schema":{"example":"team_account_001","type":"string"}},{"name":"userId","required":true,"in":"path","description":"要移除的用户ID","schema":{"example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"responses":{"204":{"description":"用户移除成功"},"403":{"description":"没有权限移除用户"},"404":{"description":"用户未关联到此共享账号"},"409":{"description":"不能移除最后一个所有者"}},"security":[{"bearer":[]}],"summary":"从共享账号移除用户","tags":["共享账号管理"]}},"/api/shared-accounts/{accountName}/users/{userId}/permissions":{"put":{"operationId":"SharedAccountsController_updateUserPermissions","parameters":[{"name":"accountName","required":true,"in":"path","description":"共享账号名称","schema":{"example":"team_account_001","type":"string"}},{"name":"userId","required":true,"in":"path","description":"目标用户ID","schema":{"example":"123e4567-e89b-12d3-a456-426614174000","type":"string"}}],"requestBody":{"required":true,"description":"用户权限更新信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserPermissionsDto"}}}},"responses":{"200":{"description":"权限更新成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRelationResponseDto"}}}},"403":{"description":"只有所有者可以修改用户权限"},"404":{"description":"用户未关联到此共享账号"}},"security":[{"bearer":[]}],"summary":"更新用户权限","tags":["共享账号管理"]}},"/api/shared-accounts/{accountName}/permissions/{action}":{"get":{"operationId":"SharedAccountsController_checkPermission","parameters":[{"name":"accountName","required":true,"in":"path","description":"共享账号名称","schema":{"example":"team_account_001","type":"string"}},{"name":"action","required":true,"in":"path","description":"操作类型","schema":{"enum":["read","write","delete"],"type":"string"}}],"responses":{"200":{"description":"权限检查完成","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionCheckResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"检查用户权限","tags":["共享账号管理"]}},"/api/shared-accounts/{accountName}/permissions":{"get":{"operationId":"SharedAccountsController_getUserPermissions","parameters":[{"name":"accountName","required":true,"in":"path","description":"共享账号名称","schema":{"example":"team_account_001","type":"string"}}],"responses":{"200":{"description":"获取成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PermissionCheckResponseDto"}}}}},"security":[{"bearer":[]}],"summary":"获取用户权限信息","tags":["共享账号管理"]}}},"info":{"title":"诛仙世界多账号管理系统 API","description":"用于管理诛仙世界游戏多个账号的进度跟踪系统","version":"1.0.0","contact":{}},"tags":[{"name":"系统信息","description":"系统状态和基础信息相关接口"},{"name":"认证管理","description":"用户认证相关接口"},{"name":"账号管理","description":"游戏账号管理相关接口"},{"name":"模板管理","description":"副本和任务模板管理相关接口"},{"name":"进度跟踪","description":"游戏进度跟踪相关接口"},{"name":"定时任务管理","description":"定时任务管理相关接口"}],"servers":[],"components":{"securitySchemes":{"JWT-auth":{"scheme":"bearer","bearerFormat":"JWT","type":"http","name":"JWT","description":"输入 JWT token","in":"header"}},"schemas":{"RegisterDto":{"type":"object","properties":{"username":{"type":"string","description":"用户名","example":"john_doe","minLength":3,"maxLength":50},"email":{"type":"string","description":"邮箱地址","example":"john@example.com"},"phone":{"type":"string","description":"手机号码","example":"13800138000","minLength":11,"maxLength":11},"password":{"type":"string","description":"密码","example":"password123","minLength":6,"maxLength":100}},"required":["username","password"]},"LoginDto":{"type":"object","properties":{"credential":{"type":"string","description":"登录凭证（用户名、邮箱或手机号）","example":"john_doe"},"password":{"type":"string","description":"密码","example":"password123","minLength":6}},"required":["credential","password"]},"CreateAccountDto":{"type":"object","properties":{"accountName":{"type":"string","description":"账号名称","example":"my_game_account","minLength":1,"maxLength":100},"isActive":{"type":"boolean","description":"是否激活","example":true,"default":true}},"required":["accountName"]},"UpdateAccountDto":{"type":"object","properties":{"accountName":{"type":"string","description":"账号名称","example":"my_game_account","minLength":1,"maxLength":100},"isActive":{"type":"boolean","description":"是否激活","example":true,"default":true}}},"CreateDungeonTemplateDto":{"type":"object","properties":{"dungeonName":{"type":"string","description":"副本名称","example":"团队副本：黑翼血环","minLength":1,"maxLength":100},"bosses":{"description":"BOSS列表","example":["拉佐格尔","瓦拉斯塔兹","勃然大怒","费尔默"],"type":"array","items":{"type":"string"}}},"required":["dungeonName","bosses"]},"UpdateDungeonTemplateDto":{"type":"object","properties":{"dungeonName":{"type":"string","description":"副本名称","example":"团队副本：黑翼血环","minLength":1,"maxLength":100},"bosses":{"description":"BOSS列表","example":["拉佐格尔","瓦拉斯塔兹","勃然大怒","费尔默"],"type":"array","items":{"type":"string"}}}},"CreateWeeklyTaskTemplateDto":{"type":"object","properties":{"taskName":{"type":"string","description":"任务名称","example":"世界BOSS击杀","minLength":1,"maxLength":100},"targetCount":{"type":"number","description":"目标数量","example":4,"minimum":1}},"required":["taskName","targetCount"]},"UpdateWeeklyTaskTemplateDto":{"type":"object","properties":{"taskName":{"type":"string","description":"任务名称","example":"世界BOSS击杀","minLength":1,"maxLength":100},"targetCount":{"type":"number","description":"目标数量","example":4,"minimum":1}}},"UpdateDungeonProgressDto":{"type":"object","properties":{"accountId":{"type":"string","description":"账号ID","example":"123e4567-e89b-12d3-a456-426614174000","format":"uuid"},"dungeonName":{"type":"string","description":"副本名称","example":"魔兽世界副本"},"bossName":{"type":"string","description":"Boss名称","example":"伊利丹"},"killCount":{"type":"number","description":"击杀次数","example":5,"minimum":0,"maximum":999}},"required":["accountId","dungeonName","bossName","killCount"]},"UpdateWeeklyTaskProgressDto":{"type":"object","properties":{"accountId":{"type":"string","description":"账号ID","example":"123e4567-e89b-12d3-a456-426614174000","format":"uuid"},"taskName":{"type":"string","description":"任务名称","example":"每周副本挑战"},"completedCount":{"type":"number","description":"完成数量","example":3,"minimum":0}},"required":["accountId","taskName","completedCount"]},"UpdateSharedDungeonProgressDto":{"type":"object","properties":{"sharedAccountName":{"type":"string","description":"共享账号名称","example":"guild_main_account"},"dungeonName":{"type":"string","description":"副本名称","example":"黑翼之巢"},"bossName":{"type":"string","description":"Boss名称","example":"拉格纳罗斯"},"killCount":{"type":"number","description":"击杀次数","example":1,"minimum":0}},"required":["sharedAccountName","dungeonName","bossName","killCount"]},"UpdateSharedWeeklyTaskProgressDto":{"type":"object","properties":{"sharedAccountName":{"type":"string","description":"共享账号名称","example":"guild_main_account"},"taskName":{"type":"string","description":"任务名称","example":"世界Boss"},"completedCount":{"type":"number","description":"完成次数","example":3,"minimum":0}},"required":["sharedAccountName","taskName","completedCount"]},"CreateSharedAccountDto":{"type":"object","properties":{"accountName":{"type":"string","description":"共享账号名称（唯一标识）","example":"team_account_001","minLength":3,"maxLength":50},"displayName":{"type":"string","description":"显示名称","example":"团队共享账号","maxLength":100},"serverName":{"type":"string","description":"服务器名称","example":"梦幻西游-紫霞仙子","maxLength":50}},"required":["accountName","displayName","serverName"]},"SharedAccountResponseDto":{"type":"object","properties":{"accountName":{"type":"string","description":"共享账号名称","example":"team_account_001"},"displayName":{"type":"string","description":"显示名称","example":"团队共享账号"},"serverName":{"type":"string","description":"服务器名称","example":"梦幻西游-紫霞仙子"},"isActive":{"type":"boolean","description":"是否激活","example":true},"createdAt":{"format":"date-time","type":"string","description":"创建时间","example":"2023-12-01T10:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2023-12-01T10:00:00.000Z"},"userCount":{"type":"number","description":"用户数量","example":3}},"required":["accountName","displayName","serverName","isActive","createdAt","updatedAt"]},"UserRelationResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"关联ID","example":"123e4567-e89b-12d3-a456-426614174000"},"userId":{"type":"string","description":"用户ID","example":"123e4567-e89b-12d3-a456-426614174000"},"username":{"type":"string","description":"用户名","example":"john_doe"},"relationType":{"type":"string","description":"关联类型","enum":["owner","contributor"],"example":"contributor"},"permissions":{"type":"object","description":"权限配置","example":{"read":true,"write":true,"delete":false}},"joinedAt":{"format":"date-time","type":"string","description":"加入时间","example":"2023-12-01T10:00:00.000Z"}},"required":["id","userId","username","relationType","permissions","joinedAt"]},"SharedAccountDetailResponseDto":{"type":"object","properties":{"accountName":{"type":"string","description":"共享账号名称","example":"team_account_001"},"displayName":{"type":"string","description":"显示名称","example":"团队共享账号"},"serverName":{"type":"string","description":"服务器名称","example":"梦幻西游-紫霞仙子"},"isActive":{"type":"boolean","description":"是否激活","example":true},"createdAt":{"format":"date-time","type":"string","description":"创建时间","example":"2023-12-01T10:00:00.000Z"},"updatedAt":{"format":"date-time","type":"string","description":"更新时间","example":"2023-12-01T10:00:00.000Z"},"userCount":{"type":"number","description":"用户数量","example":3},"userRelations":{"description":"用户关联关系列表","type":"array","items":{"$ref":"#/components/schemas/UserRelationResponseDto"}}},"required":["accountName","displayName","serverName","isActive","createdAt","updatedAt"]},"UpdateSharedAccountDto":{"type":"object","properties":{"displayName":{"type":"string","description":"显示名称","example":"团队共享账号（已更新）","maxLength":100},"serverName":{"type":"string","description":"服务器名称","example":"梦幻西游-紫霞仙子","maxLength":50},"isActive":{"type":"boolean","description":"是否激活","example":true}}},"PermissionConfigDto":{"type":"object","properties":{"read":{"type":"boolean","description":"读取权限","example":true},"write":{"type":"boolean","description":"写入权限","example":true},"delete":{"type":"boolean","description":"删除权限","example":false}}},"AddUserToAccountDto":{"type":"object","properties":{"userId":{"type":"string","description":"用户ID","example":"123e4567-e89b-12d3-a456-426614174000"},"relationType":{"type":"string","description":"关联类型","enum":["owner","contributor"],"example":"contributor"},"permissions":{"description":"自定义权限配置（可选，会覆盖默认权限）","allOf":[{"$ref":"#/components/schemas/PermissionConfigDto"}]}},"required":["userId"]},"UpdateUserPermissionsDto":{"type":"object","properties":{"read":{"type":"boolean","description":"读取权限","example":true},"write":{"type":"boolean","description":"写入权限","example":true},"delete":{"type":"boolean","description":"删除权限","example":false}}},"PermissionCheckResponseDto":{"type":"object","properties":{"hasPermission":{"type":"boolean","description":"是否有权限","example":true},"relationType":{"type":"string","description":"关联类型","enum":["owner","contributor"],"example":"contributor"},"permissions":{"type":"object","description":"权限配置","example":{"read":true,"write":true,"delete":false}},"reason":{"type":"string","description":"原因说明","example":"用户没有 delete 权限"}},"required":["hasPermission"]}}}}
